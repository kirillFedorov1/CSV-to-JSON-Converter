# CSV-to-JSON-Converter

Конвертер, предназначенный для преобразования файлов с таблицами в формате CSV в формат JSON.

## Установка

1. Убедитесь, что у вас установлен *Python 3.7* или новее.
2. Клонируйте репозиторий.
3. Установите необходимые зависимости: `pip install -r requirements.txt`

## Использование

Для работы скрипта необходимы переменные окружения:
- `SRC_PATH` для каталога с CSV файлами источников;
- `TGT_PATH` для каталога с выгруженными JSON.

Также в директории с файлами источников необходим файл с описаниями схем таблиц *schemas.json*.

Для конвертации файлов запустите главный скрипт с аргументом типа *string*, представляющим собой список таблиц:
```bash
python run.py --tables 'table1, table2, table3'
```

Если вы хотите обработать все доступные файлы, просто запустите скрипт без аргументов:
```bash
python run.py
```

## Особенности

В директории *data\retail_db* представлены примеры CSV файлов, а также файл с описаниями схем таблиц *schemas.json*.
Для корректной работы конвертера убедитесь, что структура ваших CSV файлов и файла схем соответствует приведенным примерам.

### Структура CSV

CSV файлы представлены в формате, где каждая строка содержит запись, а каждая запись разделена запятыми. Например, файл CSV с названием departments.csv может выглядеть следующим образом:
```csv
2,Fitness
3,Footwear
4,Apparel
...
```
Здесь:
- первое значение в строке (перед запятой) представляет собой идентификатор отдела (`department_id`);
- второе значение в строке (после запятой) представляет собой название отдела (`department_name`).

### Структура файла схем

Файл схемы, `schemas.json`, определяет структуру и формат данных в CSV файлах. Файл содержит отдельные определения для каждой таблицы (например, *departments*, *categories* и т. д.).

Пример структуры для таблицы *departments*:
```json
{
    "departments": [
        {
            "column_name": "department_id",
            "data_type": "integer",
            "column_position": 1
        },
        {
            "column_name": "department_name",
            "data_type": "string",
            "column_position": 2
        }
    ]
}
```
Здесь:
- *column_name* - название колонки;
- *data_type* - тип данных колонки (*integer*, *string* и т. д.);
- *column_position* - позиция колонки в CSV файле (начиная с 1).

Для каждой таблицы (например, *departments*, *categories*) будут представлены отдельные определения, определяющие структуру и формат соответствующих CSV файлов.